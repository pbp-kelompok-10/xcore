{% load static %}
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="{% static 'css/style.css' %}">

<nav class="navbar-xcore fixed top-0 left-0 w-full shadow-sm z-50">
  <div class="mx-auto px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      
      <!-- Left: Brand -->
      <div class="flex items-center">
        <a href="/" class="flex items-center">
          <img src="{% static 'image/xcore.png' %}" alt="Xcore Logo" class="h-14 inline-block">
        </a>
      </div>

      <!-- Center: Search Bar -->
      <div class="hidden md:flex flex-1 mx-8">
        
      </div>


      <div class="hidden md:flex items-center space-x-8">
        <a href="{% url 'scoreboard:scoreboard_list' %}" class="nav-link-item">
          Scoreboard
        </a>
        <a href="{% url 'prediction:list' %}" class="nav-link-item">
          Prediction
        <a href="{% url 'lineup:team-list' %}" class="nav-link-item">
          Teams
        </a>
        <a href="{% url 'lineup:player-list' %}" class="nav-link-item">
          Players
        </a>
      </div>

      <!-- Right: Desktop User Section -->
      <div class="hidden md:flex items-center space-x-6 ml-6">
        {% if user.is_authenticated %}
          <!-- User Dropdown -->
          <div class="user-dropdown-container">
            <button class="user-dropdown-trigger">
              Halo, {{ user.username }}!
              <svg class="dropdown-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </button>
            
            <!-- Dropdown Menu -->
            <div class="user-dropdown-menu">
              <a href="{% url 'landingpage:profile' %}" class="dropdown-item">
                <svg class="dropdown-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                </svg>
                Profile
              </a>
              <a href="{% url 'landingpage:logout' %}" class="dropdown-item">
                <svg class="dropdown-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                </svg>
                Logout
              </a>
            </div>
          </div>
        {% else %}
          <a href="{% url 'landingpage:login' %}" class="btn-nav-outline">
            Login
          </a>
        {% endif %}
      </div>

      <!-- Mobile Menu Button -->
      <div class="md:hidden flex items-center">
        <button class="mobile-menu-button p-2 text-white hover:opacity-80 transition-opacity">
          <span class="sr-only">Open menu</span>
          <div class="w-6 h-6 flex flex-col justify-center items-center">
            <span class="bg-current block transition-all duration-300 ease-out h-0.5 w-6 rounded-sm"></span>
            <span class="bg-current block transition-all duration-300 ease-out h-0.5 w-6 rounded-sm my-0.5"></span>
            <span class="bg-current block transition-all duration-300 ease-out h-0.5 w-6 rounded-sm"></span>
          </div>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div class="mobile-menu hidden md:hidden bg-white bg-opacity-10 backdrop-blur-sm border-t border-white border-opacity-20">
    <div class="px-6 py-4 space-y-4">
      
      <!-- Mobile Search Bar -->
      <div class="mb-4">
        <input 
          type="text" 
          placeholder="Cari pertandingan, tim, atau tanggal..." 
          class="w-full px-4 py-2 rounded-full border-none outline-none text-gray-700 shadow-sm"
          style="font-size: 14px;"
        />
      </div>

      <!-- Mobile Navigation Links -->
      <div class="space-y-1">
        <a href="/" class="block text-white hover:opacity-80 font-medium py-3 transition-opacity">
          Home
        </a>
        <a href="{% url 'scoreboard:scoreboard_list' %}" class="block text-white hover:opacity-80 font-medium py-3 transition-opacity">
          Scoreboard
        </a>
        <a href="{% url 'lineup:team-list' %}" class="block text-white hover:opacity-80 font-medium py-3 transition-opacity">
          Teams
        </a>
        <a href="{% url 'lineup:player-list' %}" class="block text-white hover:opacity-80 font-medium py-3 transition-opacity">
          Players
        </a>
      </div>

      <!-- Mobile User Section -->
      <div class="border-t border-white border-opacity-20 pt-4">
        {% if user.is_authenticated %}
          <div class="mb-4">
            <div class="font-medium text-white mb-3">Halo, {{ name|default:user.username }}!</div>
            <div class="space-y-2">
              <a href="#" class="block text-white hover:opacity-80 font-medium py-2 transition-opacity">
                ðŸ‘¤ Profile
              </a>
              <a href="{% url 'landingpage:logout' %}" class="block text-white hover:opacity-80 font-medium py-2 transition-opacity">
                ðŸšª Logout
              </a>
            </div>
          </div>
        {% else %}
          <div class="space-y-3">
            <a href="{% url 'landingpage:login' %}" class="btn-nav-outline-mobile">
              Login
            </a>
            <a href="{% url 'landingpage:register' %}" class="btn-nav-outline-mobile">
              Register
            </a>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</nav>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Mobile menu toggle
    const btn = document.querySelector(".mobile-menu-button");
    const menu = document.querySelector(".mobile-menu");
    if (btn && menu) {
      btn.addEventListener("click", () => {
        menu.classList.toggle("hidden");
      });
    }

    // User dropdown toggle 
    const dropdownTrigger = document.querySelector(".user-dropdown-trigger");
    const dropdownContainer = document.querySelector(".user-dropdown-container");
    
    if (dropdownTrigger && dropdownContainer) {
      dropdownTrigger.addEventListener("click", (e) => {
        e.stopPropagation();
        dropdownContainer.classList.toggle("active");
      });

      // Close dropdown when clicking outside
      document.addEventListener("click", (e) => {
        if (!dropdownContainer.contains(e.target)) {
          dropdownContainer.classList.remove("active");
        }
      });
    }
  });
</script>
