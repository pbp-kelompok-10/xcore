{% extends "base.html" %}

{% block title %}Highlights - {{ home_team }} vs {{ away_team }} - Xcore{% endblock %}

{% block extra_css %}
<style>
    :root {
        --primary-color: #1e423b;
        --secondary-color: #56bda9;
        --secondary-hover: #4daa96;
        --light-bg: #eef8f6;
        --white: #ffffff;
        --text-dark: #333333;
        --text-light: #666666;
        --card-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        --navbar-height: 60px; /* Estimasi tinggi navbar */
        --footer-height: 60px; /* Estimasi tinggi footer */
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #f8fbfa 0%, #f0f7f5 100%);
        color: var(--text-dark);
        line-height: 1.6;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        padding: 0;
    }

    .field-pattern {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
            linear-gradient(45deg, transparent 49%, rgba(86, 189, 169, 0.02) 49%, rgba(86, 189, 169, 0.02) 51%, transparent 51%),
            linear-gradient(-45deg, transparent 49%, rgba(30, 66, 59, 0.02) 49%, rgba(30, 66, 59, 0.02) 51%, transparent 51%);
        background-size: 60px 60px;
        z-index: -1;
        opacity: 0.3;
    }

    .content-wrapper {
        flex: 1 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        padding-top: calc(var(--navbar-height) + 20px);
        padding-bottom: calc(var(--footer-height) + 20px);
        width: 100%;
        max-width: 1400px;
        margin: 0 auto;
    }

    .highlights-container {
        width: 100%;
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .highlights-title {
        font-size: clamp(24px, 4vw, 32px);
        font-weight: 700;
        color: var(--primary-color);
        text-align: left;
        margin-bottom: 10px;
    }

    .match-info {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: clamp(40px, 8vw, 120px);
        flex-wrap: nowrap;
        padding: 20px;
        background: var(--light-bg);
        border-radius: 16px;
        box-shadow: var(--card-shadow);
    }

    .team {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: clamp(12px, 3vw, 16px);
        justify-content: center;
    }

    .team-flag {
        width: clamp(40px, 7vw, 60px);
        height: clamp(40px, 7vw, 60px);
        border-radius: 50%;
        object-fit: cover;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transition: transform 0.3s ease;
    }

    .team-flag:hover {
        transform: scale(1.05);
    }

    .team-name {
        font-size: clamp(12px, 2vw, 16px);
        font-weight: 600;
        color: var(--text-dark);
        text-align: center;
    }

    .team-score {
        font-size: clamp(16px, 3.5vw, 24px);
        font-weight: 700;
        color: var(--primary-color);
    }

    .vs-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        min-width: 60px;
    }

    .vs-text {
        font-size: clamp(14px, 2.5vw, 20px);
        font-weight: 700;
        color: var(--text-dark);
        letter-spacing: 2px;
    }

    .ft-text {
        font-size: clamp(12px, 2vw, 18px);
        font-weight: 500;
        color: var(--text-light);
    }

    .video-section {
        position: relative;
        width: 100%;
        max-width: 100%;
        height: auto;
        aspect-ratio: 16 / 9;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 16px;
        overflow: hidden;
        background-color: #000;
        box-shadow: var(--card-shadow);
    }

    .video-section iframe {
        width: 100%;
        height: 100%;
        max-height: 85vh;
        border: none;
        object-fit: cover;
        border-radius: 16px;
    }

    .video-placeholder {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        font-size: clamp(20px, 4vw, 28px);
        font-weight: 600;
        color: var(--white);
        text-align: center;
        gap: 15px;
    }

    .add-video-btn {
        background-color: var(--white);
        color: var(--primary-color);
        padding: 10px 20px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        border: 2px solid var(--white);
        transition: all 0.3s ease;
    }

    .add-video-btn:hover {
        background-color: var(--primary-color);
        color: var(--white);
    }

    .actions {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 25px;
    }

    .btn-action {
        text-decoration: none;
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 5px;
    }

    .btn-back {
        background-color: #94a3b8;
        color: var(--white);
    }

    .btn-back:hover {
        background-color: #64748b;
        transform: translateY(-2px);
    }

    .btn-edit {
        background-color: #3b82f6;
        color: var(--white);
    }

    .btn-edit:hover {
        background-color: #2563eb;
        transform: translateY(-2px);
    }

    .btn-delete {
        background-color: #ef4444;
        color: var(--white);
    }

    .btn-delete:hover {
        background-color: #dc2626;
        transform: translateY(-2px);
    }

    /* Responsive */
    @media (max-width: 768px) {
        .match-info {
            flex-direction: column;
            gap: 20px;
            padding: 15px;
        }

        .team-flag {
            width: clamp(30px, 6vw, 50px);
            height: clamp(30px, 6vw, 50px);
        }

        .video-section {
            aspect-ratio: 16 / 9;
        }

        .actions {
            flex-direction: column;
        }

        .btn-action {
            width: 100%;
        }
    }

    @media (max-width: 480px) {
        .field-pattern {
            opacity: 0.2;
        }

        .highlights-title {
            font-size: clamp(20px, 4vw, 24px);
        }

        .team-name {
            font-size: clamp(10px, 2vw, 14px);
        }

        .team-score {
            font-size: clamp(14px, 3vw, 20px);
        }

        .vs-text {
            font-size: clamp(12px, 2vw, 16px);
        }

        .ft-text {
            font-size: clamp(10px, 1.5vw, 14px);
        }

        .video-section {
            max-height: 60vh;
        }

        .video-placeholder {
            font-size: clamp(16px, 3vw, 20px);
        }

        .btn-action {
            padding: 8px 15px;
            font-size: 14px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="field-pattern"></div>

<div class="content-wrapper">
    <div class="highlights-container">
        <h1 class="highlights-title">Highlights</h1>

        <div class="match-info">
            <div class="team">
                <img src="{{ home_team_flag }}" alt="{{ home_team }} Flag" class="team-flag">
                <p class="team-name">{{ home_team }}</p>
                <p class="team-score">{{ home_score }}</p>
            </div>

            <div class="vs-container">
                <p class="vs-text">VS</p>
                <p class="ft-text">FT</p>
            </div>

            <div class="team">
                <img src="{{ away_team_flag }}" alt="{{ away_team }} Flag" class="team-flag">
                <p class="team-name">{{ away_team }}</p>
                <p class="team-score">{{ away_score }}</p>
            </div>
        </div>

        <!-- Video Section -->
        {% if highlight and highlight.video %}
            <div class="video-section">
                <iframe
                    src="{{ highlight.video|safe }}"
                    title="Match Highlight"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen
                    referrerpolicy="strict-origin-when-cross-origin">
                </iframe>
            </div>
        {% else %}
            <div class="video-section">
                <div class="video-placeholder">
                    <p>No highlight video available</p>
                    {% if user.is_admin %}
                        <a href="{% url 'highlights:highlight_create' match.id %}" class="add-video-btn">Add Video</a>
                    {% endif %}
                </div>
            </div>
        {% endif %}

        <!-- Buttons -->
        <div class="actions">
            <a href="{% url 'statistik:statistik_display' match.id %}" class="btn-action btn-back">‚Üê Back to Statistik</a>
            {% if user.is_admin and highlight %}
                <a href="{% url 'highlights:highlight_update' match.id %}" class="btn-action btn-edit">‚úèÔ∏è Update Highlight</a>
                <a href="{% url 'highlights:highlight_delete' match.id %}" class="btn-action btn-delete"
                   onclick="return confirm('Are you sure you want to delete this highlight?');">
                    üóë Delete Highlight
                </a>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}